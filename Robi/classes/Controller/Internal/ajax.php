<?php defined('SYSPATH') or die('No direct script access.');class Controller_Internal_Ajax extends Controller {		// Get Department List	public function action_department(){		$ids = $this->request->param('id');		$data = ORM::factory('Departmentlist')->where('companyId','=',$ids)->find_all();		foreach($data as $value){			$id[$value->id]=$value->departmentName;		}		echo Form::select('departmentId', $id, null, array('class'=>'form-control','id'=>'showComNameId'));	}		// Get Section List	public function action_section(){		$ids = $this->request->param('id');		$data = ORM::factory('sectionlist')->where('departmentId','=',$ids)->find_all();		foreach($data as $value){			$id[$value->id]=$value->sectionName;		}		echo Form::select('sectionId', $id, null, array('class'=>'form-control','id'=>'showComNameId'));	}		// Get Type List	public function action_type(){		$ids = $this->request->param('id');		$data = ORM::factory('designationlist')->where('typeId','=',$ids)->find_all();		foreach($data as $value){			$id[$value->id]=$value->designationName;		}		echo Form::select('designationId', $id, null, array('class'=>'form-control','id'=>'showTypeNameId'));	}		// Get Employee List	public function action_employee(){		$ids = $this->request->param('id');		$data = ORM::factory('employeeinfo')->where('id','=',$ids)->find_all();		foreach($data as $value){			$id[$value->id]=$value->employeeId;		}		echo Form::select('empId', $id, null, array('class'=>'form-control','id'=>'showEmpNameId'));	}		// get bank list	public function action_bank(){		$data = ORM::factory('banklist')->find_all();		foreach($data as $bank){			$id[$bank->id]=$bank->bankName;		}		echo Form::select('bankId', $id, null, array('class'=>'form-control','id'=>'showbank'));	}		// branch	public function action_branch(){		$ids = $this->request->param('id');		$data = ORM::factory('bankbranch')->find_all();		foreach($data as $bra){			$id[$bra->id]=$bra->branchName;		} 		echo Form::select('branchId', $id, null, array('class'=>'form-control','id'=>'showbranch'));  				//echo '11';	}		//account no	public function action_account(){		echo Form::input('accountNo','',array('class'=>'form-control','id'=>'accountno'));	}		// duration	public function action_duration(){		$startDate=$this->request->param('id');		$endDate=$this->request->param('id1');				$startDate    = new DateTime($startDate);		$endDate      = new DateTime($endDate);		$diff = $startDate->diff($endDate);		$duration=$diff->format('%d');		$sum_duration=$duration+1;		echo Form::input('duration', $sum_duration, array('class'=>'form-control'));	}		// leave	public function action_leavedate(){		$startDate=$this->request->param('id');		$endDate=$this->request->param('id1');		$leaveType=$this->request->param('id2');				$start_date    = new DateTime($startDate);		$end_date      = new DateTime($endDate);		$diff = $start_date->diff($end_date);		$duration=$diff->format('%d');		$countduration=$duration+1;				$currentDate = date("Y-m-d");		$currentYearMonth = date("Y-m");		$currentDay = date("d");		$addTwoDay=$currentDay+2;		$addTwoDaysWithCurrentDate = $currentYearMonth."-".$addTwoDay;				// get holiday list		$data = ORM::factory('holidaylist')->find_all();				foreach($data as $holi){			$holidayId[$holi->id]=$holi->holidayDate;			$holidayDate=$holidayId[$holi->id];		}				// get weekend list		$deptId=1; // get department id from session		$data = ORM::factory('weekendlist')->where('departmentId','=',$deptId)->find_all();				foreach($data as $week){			$weekId[$week->id]=$week->weekendDate;			$weekDate=$weekId[$week->id];		}				// get leave quater 		$data = ORM::factory('leaveschedule')				->where('startDate','<=',$startDate)				->where('endDate','>=',$startDate)				->where('startDate','<=',$endDate)				->where('endDate','>=',$endDate)				->find_all();				foreach($data as $qua){			$quaterId[$qua->id]=$qua->qId;			$qId=$qua->qId;		}						if($startDate <= $endDate)		{			if($startDate < $currentDate)			{				if($leaveType == '2')				{					echo $msg="<span style='color:blue'>Success.</span>";				}				else{					echo $msg="<span style='color:red'>Sorry, Start date is small from current date only for sick!</span>";				}			}			else if($startDate >= $addTwoDaysWithCurrentDate)			{				if($countduration > '2' && $leaveType == '1' && $qId == '1')				{					echo $msg="<span style='color:red'>Sorry, Causal leave must be less than or equal to 2 day for first quater!</span>";				}				else if($countduration > '3' && $leaveType == '2' && $qId == '1')				{					echo $msg="<span style='color:red'>Sorry, Sick leave must be less than or equal to 3 day for first quater!</span>";				}				else if($countduration > '2' && $leaveType == '3' && $qId == '1')				{					echo $msg="<span style='color:red'>Sorry, Earned leave must be less than or equal to 2 day for first quater!</span>";				}				else if($countduration > '2' && $leaveType == '1' && $qId == '2')				{					echo $msg="<span style='color:red'>Sorry, Causal leave must be less than or equal to 2 day for second quater!</span>";				}				else if($countduration > '2' && $leaveType == '2' && $qId == '2')				{					echo $msg="<span style='color:red'>Sorry, Sick leave must be less than or equal to 2 day for second quater!</span>";				}				else if($countduration > '3' && $leaveType == '3' && $qId == '2')				{					echo $msg="<span style='color:red'>Sorry, Earned leave must be less than or equal to 3 day for second quater!</span>";				}				else if($countduration > '3' && $leaveType == '1' && $qId == '3')				{					echo $msg="<span style='color:red'>Sorry, Causal leave must be less than or equal to 3 day for third quater!</span>";				}				else if($countduration > '2' && $leaveType == '2' && $qId == '3')				{					echo $msg="<span style='color:red'>Sorry, Sick leave must be less than or equal to 2 day for third quater!</span>";				}				else if($countduration > '2' && $leaveType == '3' && $qId == '3')				{					echo $msg="<span style='color:red'>Sorry, Earned leave must be less than or equal to 2 for third quater!</span>";				}				else				{					echo $msg="<span style='color:blue'>Success.</span>";				}			}			else{				echo $msg="<span style='color:red'>Soory: You must choose 2 days later from current days for Casual and Earned leave!</span>";			}					}		else if($startDate > $endDate){			echo $msg="<span style='color:red'>Sorry, Start date must be small from end date!</span>";		}					}}